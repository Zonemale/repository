<html>
<head>
  <title>Nginx</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600388 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1969"/>
<h1>Nginx</h1>

<div>
<span><div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">一、概述</span></font></div><ol><li><div><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">Nginx</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">是一款高性能的</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">http</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">服务器</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">/</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">反向代理服务器及电子邮件（</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">IMAP/POP3</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">）代理服务器。由俄罗斯的程序设计师</span><span style="text-indent: 21pt; background: rgb(252, 252, 254); font-size: 12pt; color: rgb(99, 140, 11);-en-paragraph:true;">伊戈尔</span><span style="text-indent: 21pt; background: rgb(252, 252, 254); font-size: 12pt; color: rgb(99, 140, 11);-en-paragraph:true;">·</span><span style="text-indent: 21pt; background: rgb(252, 252, 254); font-size: 12pt; color: rgb(99, 140, 11);-en-paragraph:true;">西索夫（</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">Igor Sysoev</span><span style="text-indent: 21pt; background: rgb(252, 252, 254); font-size: 12pt; color: rgb(99, 140, 11);-en-paragraph:true;">）</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">所开发，官方测试</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">nginx</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">能够支支撑</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">5</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">万并发链接，并且</span> <span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">cpu</span><span style="text-indent: 21pt;font-size: 12pt;-en-paragraph:true;">、内存等资源消耗却非常低，运行非常稳定。</span></div></li><li><div><span style="font-size: 12pt;">Nginx默认端口是80</span></div></li></ol><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">二、应用场景</span></font></div><ol><li><div><span style="text-indent: 21pt; font-size: 12pt; color: rgb(255, 0, 0); line-height: 115%;-en-paragraph:true;">http</span> <span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;"><span style="font-size: 12pt; line-height: 115%; color: rgb(255, 0, 0);">服务器</span>。</span><span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">Nginx</span> <span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">是一个</span> <span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">http</span> <span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">服务可以独立提供</span> <span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">http</span> <span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">服务。可以做</span><span style="text-indent: 21pt; font-size: 12pt; color: red; line-height: 115%;-en-paragraph:true;">网页静态服务器</span><span style="text-indent: 21pt; font-size: 12pt; line-height: 115%;-en-paragraph:true;">。</span></div></li><li><div><span style="text-indent: 21pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0);">虚拟主机</span><span style="font-size: 12pt;">。可以实现在一台服务器</span><span style="font-size: 12pt; color: rgb(255, 0, 0);">虚拟出多个网站</span><span style="font-size: 12pt;">。例如个人网站使用的虚拟主机。</span></span></div></li><li><div><span style="font-size: 12pt; color: rgb(255, 0, 0);">反向代理，负载均衡</span><span style="font-size: 12pt; color: rgb(29, 27, 17);">。当网站的访问量达到一定程度后，单台服务器不能满足用户的请求时，需要用多台服务器集群可以使用</span> <span style="font-size: 12pt; color: rgb(29, 27, 17);">nginx</span> <span style="font-size: 12pt; color: rgb(29, 27, 17);">做</span><span style="font-size: 12pt; color: rgb(255, 0, 0);">反向代理</span><span style="font-size: 12pt; color: rgb(29, 27, 17);">。并且多台服务器可以平均分担负载，不会因为某台服务器负载高宕机而某台服务器闲置的情况。</span></div></li></ol><div><font style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(29, 27, 17); font-weight: bold;">三、退出和启动Nginx</span></font></div><ol><li><div><span style="font-size: 12pt; color: rgb(29, 27, 17);">退出</span></div></li><ul><li><div><span style="font-size: 12pt; color: rgb(29, 27, 17);">./nginx -s stop</span></div></li><li><div><span style="font-size: 12pt; color: rgb(29, 27, 17);">./nginx -s quit</span></div></li></ul><li><div><span style="font-size: 12pt; color: rgb(29, 27, 17);">启动</span></div></li><ul><li><div><span style="color: rgb(29, 27, 17); font-size: 12pt;">cd /usr/local/ngiux/sbin</span></div></li><li><div><span style="font-size: 12pt; color: rgb(29, 27, 17);">./nginx</span></div></li><li><div><span style="font-size: 12pt; color: rgb(29, 27, 17);">./nginx -s reload</span></div></li></ul></ol><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">四、Nginx静态网站部署</span></font></div><ol><li><div><span style="font-size: 16px;">虚拟主机，也叫“网站空间”，就是把一台运行在互联网上的物理服务器划分成多个“虚拟”服务器。</span></div></li><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">端口绑定</span></span></div></li><ol><li><div><span style="font-size: 16px;">上传静态网站</span></div></li><li><div><span style="font-size: 16px;">修改Nginx的配置文件</span></div></li><li><div><span style="font-size: 16px;">访问测试</span></div></li></ol><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">域名绑定</span></span></div></li><ol><li><div><span style="font-size: 16px;">域名：是由一串用“点”分割的字符组成的Internet上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位。</span></div></li><ol><li><div><span style="font-size: 12pt;">DNS:域名系统，域名解析器</span></div></li><li><div><span style="font-size: 16px;">顶级域名：</span></div></li><ol><li><div><span style="font-size: 16px;">国家顶级域名，中国：cn</span></div></li><li><div><span style="font-size: 16px;">国际顶级域名，.com,.net</span></div></li><li><div><span style="font-size: 12pt;">例如：baidu.com</span></div></li></ol><li><div><span style="font-size: 16px;">二级域名：注册人的网上名称,如：ibm,yahoo,microsoft</span></div></li><ol><li><div><span style="font-size: 16px;">例如：map.baidu.com</span></div></li></ol><li><div><span style="font-size: 16px;">三级域名：三级域名用字母(A~Z,a~z,大小写等)、数字（0~9）和连接符（-）组成，各级域名之间用实点（.）连接，</span></div></li><ol><li><div><span style="font-size: 16px;">如：item.map.baidu.com</span></div></li></ol></ol><li><div><span style="font-size: 16px;">域名与IP绑定：一个域名对应一个IP地址，一个IP地址可以被多个域名绑定（本地测试可以修改hosts文件）----------C:\Windows\System32\drivers\etc</span></div></li><li><div><span style="font-size: 16px;">做好域名指向后，修改Nginx配置文件后测试</span></div></li></ol></ol><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">五、Nginx反向代理与负载均衡</span></font></div><ol><li><div><span style="font-size: 12pt;">反向代理方式是指以代理服务器来接收Internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给Internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器</span></div></li><li><div><span style="font-size: 16px;">正向代理</span><span style="font-size: 12pt;"><img src="Nginx_files/正向代理.png" type="image/png" data-filename="正向代理.png"/></span></div></li><li><div><span style="font-size: 16px;">反向代理</span><span style="font-size: 12pt;"><img src="Nginx_files/反向代理.png" type="image/png" data-filename="反向代理.png"/></span></div></li><li><div><span style="font-size: 16px;">图解Nginx代理</span><span style="font-size: 12pt;"><img src="Nginx_files/代理原理.png" type="image/png" data-filename="代理原理.png"/></span></div></li><li><div><span style="font-size: 16px;">集群中的问题</span><span style="font-size: 12pt;"><img src="Nginx_files/集群中的问题.png" type="image/png" data-filename="集群中的问题.png"/></span></div></li><li><div><span style="font-size: 16px;">网络访问流程</span><span style="font-size: 12pt;"><img src="Nginx_files/网络访问的流程：DNS.png" type="image/png" data-filename="网络访问的流程：DNS.png"/></span></div></li></ol><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">六、负载均衡</span></font></div><ol><li><div><span style="font-size: 16px;">概念：建立在现有网络结构之上，它提供了一种廉价有效透明的方法扩展网络设备和服务器的宽带、增加吞吐量、加强网络数据处理能力、提高网络的灵活性和可用性（就是分摊到多个操作单元上进行执行）</span></div></li><li><div><span style="font-size: 16px;">步骤</span></div></li><ol><li><div><span style="font-size: 16px;">复制多个存放工程的tomcat</span></div></li><li><div><span style="font-size: 16px;">分别启动tomcat服务</span></div></li><li><div><span style="font-size: 16px;">配置负载均衡</span></div></li><ol><li><div><span style="font-size: 16px;">修改Nginx配置文件</span></div></li><li><div><span style="font-size: 12pt;">weight=2;---------设置该服务器权重为2</span></div></li></ol></ol></ol><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 