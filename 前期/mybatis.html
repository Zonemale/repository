<html>
<head>
  <title>mybatis</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600388 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1983"/>
<h1>mybatis</h1>

<div>
<span><div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">一、什么是框架</span></font></div><ol><li><div><span style="font-size: 16px;">概念</span></div></li><ol><li><div><span style="font-size: 12pt;">框架是整个或部分系统的可重用设计，表现为一组抽象构件及构件实例间交互的方法；</span></div></li><li><div><span style="font-size: 12pt;">框架是可被应用开发者定制的应用骨架。前者是从应用方面而后者是从目的方面给出的定义</span></div></li><li><div><span style="font-size: 12pt;">框架其实就是某种应用的半成品，就是一组组件，供你选用完成你自己的系统</span></div></li><li><div><span style="font-size: 12pt;"><img src="mybatis_files/01三层架构.png" type="image/png" data-filename="01三层架构.png"/></span></div></li></ol></ol><div><span style="font-size: 14pt; font-weight: bold;">二、MyBatis框架</span></div><ol><li><div><span style="font-size: 16px;">概念</span></div></li><ol><li><div><span style="font-size: 12pt;">mybatis是一个优秀的基于 java 的持久层框架，它内部封装了 jdbc，</span><span style="font-size: 12pt;">使开发者只需要关注 sql 语句本身，</span></div></li><li><div><span style="font-size: 12pt;">mybatis通过 xml 或注解的方式将要执行的各种statement配置起来，并通过java对象和statement 中</span><span style="font-size: 12pt;">sql 的动态参数进行映射生成最终执行的 sql 语句，最后由 mybatis 框架执行 sql 并将结果映射为 java 对象并</span><span style="font-size: 12pt;">返回。</span></div></li><li><div><span style="font-size: 12pt;"><font style="color: rgb(255, 0, 0);">采用 ORM 思想解决了实体和数据库映射的问题，对 jdbc进行了封装，屏蔽了 jdbc api 底层访问细节（ORM就是Object Relational Mapping:对象关系映射）</font></span></div></li><li><div><span style="font-size: 16px;">实体类的属性和数据库表中的 字段保持一致</span></div></li></ol><li><div><span style="font-size: 16px;">入门</span></div></li><ul><li><div><span style="font-size: 16px;">第一步：创建maven工程并导入坐标</span></div></li><li><div><span style="font-size: 16px;">第二步：创建实体类和dao的接口</span></div></li><li><div><span style="font-size: 16px;">第三步：创建mybatis的主配置文件：SqlMapConifg.xml</span></div></li></ul></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div>&lt;!DOCTYPE configuration</div><div>        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</div><div>        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</div><div><br/></div><div>&lt;!--mybatis的主配置文件--&gt;</div><div>&lt;configuration&gt;</div><div>    &lt;!--环境配置--&gt;</div><div>    &lt;environments default=&quot;mysql&quot;&gt;</div><div>        &lt;!--配置mysql环境--&gt;</div><div>        &lt;environment id=&quot;mysql&quot;&gt;</div><div>            &lt;!--配置事务的类型--&gt;</div><div>            &lt;transactionManager type=&quot;JDBC&quot;&gt;&lt;/transactionManager&gt;</div><div>            &lt;!--配置数据源（数据库连接池）--&gt;</div><div>            &lt;dataSource type=&quot;POOLED&quot;&gt;</div><div>                &lt;!--配置连接数据库的四个基本信息--&gt;</div><div>                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;</div><div>                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/eesy_mybatis&quot;&gt;&lt;/property&gt;</div><div>                &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</div><div>                &lt;property name=&quot;password&quot; value=&quot;root&quot;&gt;&lt;/property&gt;</div><div>            &lt;/dataSource&gt;</div><div>        &lt;/environment&gt;</div><div>    &lt;/environments&gt;</div><div><br/></div><div>    &lt;!--指定映射配置文件的位置，映射配置文件指的是每个dao独立的 配置文件--&gt;</div><div>    &lt;mappers&gt;</div><div>        &lt;mapper resource=&quot;vaught/dao/UserDao.xml&quot;&gt;&lt;/mapper&gt;</div><div>    &lt;/mappers&gt;</div><div><br/></div><div>&lt;/configuration&gt;</div></div><ul><ul><li><div><span style="font-size: 12pt;">第四步：创建映射配置文件：UserDao.xml</span></div></li></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div>&lt;!DOCTYPE mapper</div><div>        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</div><div>        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</div><div>&lt;mapper namespace=&quot;vaught.dao.UserDao&quot;&gt;</div><div>    &lt;!--配置查询所有--&gt;</div><div>    &lt;select id=&quot;findAll&quot;&gt;</div><div>        select * from User</div><div>    &lt;/select&gt;</div><div><br/></div><div>&lt;/mapper&gt;</div></div><ul><ul><li><div><span style="font-size: 12pt;">环境搭建的注意事项：</span></div></li><ul><li><div><span style="font-size: 12pt;">创建UserDao.xml和UserDao.java时名称是为了和以前的知识保持一致，在mybatis中它把持久层的操作接口名称和映射文件也叫做：Mapper,所以，UserDao和UserMapper是一样的</span></div></li><li><div><span style="font-size: 16px;">在idea中创建目录的时候，它和包是不一样的，包在创建时，com.itheima.dao它是三级结构，目录在创建时：com,itheima.dao是一级目录</span></div></li><li><div><span style="font-size: 12pt;">mybatis的映射配置文件必须和dao接口的包接口相同</span></div></li><li><div><span style="font-size: 16px;">映射配置文件的mapper标签</span><span style="font-size: 16px; color: rgb(255, 0, 0); font-weight: bold;">namespace属性</span><span style="font-size: 16px;">取值必须是dao接口的全限定类名</span></div></li><li><div><span style="font-size: 16px;">映射配置文件的操作配置，id属性的取值必须是dao接口的方法名</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>public static void main(String[] args) throws IOException {</div><div>    //1.加载SqlMapConfig配置文件</div><div>    InputStream is = Resources.getResourceAsStream(&quot;SqlMapConfig.xml&quot;);</div><div>    //2.创建工厂模式对象</div><div>    SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();</div><div>    SqlSessionFactory factory = builder.build(is);</div><div>    //3.使用工厂生产SqlSession对象</div><div>    SqlSession sqlSession = factory.openSession();</div><div>    //4.使用SqlSession创建dao接口代理对象</div><div>    UserDao userDao = sqlSession.getMapper(UserDao.class);</div><div>    //5.使用代理对象执行方法</div><div>    List&lt;User&gt; users = userDao.findAll();</div><div>    for (User user : users) {</div><div>        System.out.println(user);</div><div>    }</div><div><br/></div><div>    //6.释放资源</div><div>    sqlSession.close();</div><div>    is.close();</div><div>}</div><div><br/></div><div>每个对像详解</div><div>1.读配置文件的方法：</div><div>    1.使用类加载器，它只能读取类路径的配置文件</div><div>    2.使用ServletContext对象的getRealPath()</div><div>2.创建工厂使用构建者模式</div><div>    1.构建者模式：把对象的创建细节隐藏，使使用者直接调用方法即可拿到对象</div><div>3.创建dao实现类使用了代理模式</div><div>    1.不修改源码的基础上对已有方法增强</div><div><br/></div><div><font face="Monaco">注意事项：在映射配置中指定结果集要封装的类名</font></div></div><div><img src="mybatis_files/入门案例的分析.png" type="image/png" data-filename="入门案例的分析.png"/></div><ul><li><div>自定义Mybatis分析</div></li><ul><li><div>mybatis在使用代理dao的方式实现增删改查时做什么事情</div></li><ul><li><div>创建代理对象</div></li><li><div>在代理对象中调用selectList</div></li></ul><li><div>流程解析</div></li><li><div><img src="mybatis_files/自定义Mybatis分析.png" type="image/png" data-filename="自定义Mybatis分析.png"/></div></li><li><div>自定义mybatis能通过入门案例看到的类</div></li></ul></ul><div><br/></div><div>视频13</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 