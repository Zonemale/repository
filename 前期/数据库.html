<html>
<head>
  <title>数据库</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600388 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1732"/>
<h1>数据库</h1>

<div>
<span><div><div><span style="font-size: 14pt; font-weight: bold;">一、数据库</span></div><ol><li><div><span style="font-size: 14.6667px;">数据库特点：</span></div></li><ol><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(255, 0, 0);">持久化存</span>储数据，数据库就是一个<span style="font-size: 14.6667px; color: rgb(255, 0, 0);">文件系统</span></span></div></li><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(255, 0, 0);">方便存储和管理数据</span></span></div></li><li><div><span style="font-size: 14.6667px;">使用同一方式操作数据库--<span style="font-size: 14.6667px; font-weight: bold;">SQL</span></span></div></li></ol><li><div><span style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold;">DOS命令</span></span></div></li><ol><li><div><span style="font-size: 14.6667px;">servises.msc---------打开任务管理器</span></div></li><li><div>net stop mysql-------------打开数据库服务</div></li><li><div>net start mysql-------------关闭数据库服务</div></li></ol><li><div><span style="font-size: 11pt;"><img src="数据库_files/MySQL数据库、表、数据的关系.bmp" type="image/bmp" data-filename="MySQL数据库、表、数据的关系.bmp"/></span></div></li></ol><div><span style="font-size: 14pt; font-weight: bold;">二、MySQL目录结构</span></div><ol><li><div><span style="font-size: 14.6667px;">MySQL安装目录</span></div></li><ol><li><div>配置文件my.ini</div></li></ol><li><div>MySQL数据目录</div></li><ul><li><div>数据库服务器：安装了数据库软件的电脑</div></li><li><div>数据库管理系统</div></li><li><div>数据库：文件夹</div></li><li><div>表：文件</div></li><li><div>数据：数据</div></li></ul></ol><div><span style="font-size: 14pt; font-weight: bold;">三、SQL</span></div><ol><li><div>概念：Structured Query Language：结构化查询语言，其实就是定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</div></li><li><div>通用语法：</div></li><ol><li><div>SQL语句可以单行或多行书写，以分号结尾</div></li><li><div>可以使用空格和缩进来增强语句的可读性</div></li><li><div>MySQL数据库的SQL语句<span style="color: rgb(255, 0, 0); font-weight: bold;">不区分大小写</span>（关键字建议大写）</div></li><li><div>3种注释</div></li><ol><li><div>单行注释：-- <span style="color: rgb(255, 0, 0);">（空格）</span>注释内容（两个横杠注释中间必须加空格）  或  #注释内容（MySQL特有方式）</div></li><li><div>多行注释：/* 注释 */</div></li></ol><li><div>退出：</div></li><ol><li><div>exit</div></li><li><div>quit</div></li></ol></ol><li><div>SQL分类</div></li><ol><li><div>DDL(Data Definition Language)<span style="color: rgb(255, 0, 0);">数据定义语言</span>：</div></li><ul><li><div>用来定义数据库对象：数据库，表，列等。关键字：create, drop,alter 等</div></li></ul><li><div>DML(Data Manipulation Language<span style="color: rgb(255, 0, 0);">)数据操作语言:</span></div></li><ul><li><div>用来对数据库中表的数据进行增删改。关键字：insert, delete, update 等</div></li></ul><li><div>DQL(Data Query Language)数据查询语言</div></li><ul><li><div>用来查询数据库中表的记录(数据)。关键字：select, where 等</div></li></ul><li><div>DCL(Data Control Language)<span style="color: rgb(255, 0, 0);">数据控制语言(了解)</span></div></li><ul><li><div>用来定义数据库的访问权限和安全级别，及创建用户。关键字：GRANT， REVOKE 等</div></li></ul><li><div><img src="数据库_files/SQL分类.bmp" type="image/bmp" data-filename="SQL分类.bmp" width="727"/></div></li></ol><li><div><font style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold;">DDL：操作数据库、表</span></font></div></li><ol><li><div><span style="font-size: 12pt;">操作数据库：CRUD</span></div></li><ol><li><div>C(Create):创建</div></li><ol><li><div>创建数据库：</div></li><ol><li><div>create database 数据库名称;</div></li></ol><li><div>创建数据库，判断不存在，再创建：</div></li><ol><li><div>create database if not exists 数据库名称;</div></li></ol><li><div>创建数据库，并指定字符集</div></li><ol><li><div>create database 数据库名称 character set 字符集名;</div></li></ol></ol><li><div>R(Retrieve)：查询</div></li><ol><li><div>查询所有数据库的名称:</div></li><ol><li><div> show databases;</div></li></ol><li><div> 查询某个数据库的字符集:查询某个数据库的创建语句</div></li><ol><li><div>show create database 数据库名称;</div></li></ol></ol><li><div>U(Update):修改</div></li><ol><li><div>修改数据库的字符集</div></li><ol><li><div>alter database 数据库名称 character set 字符集名称;</div></li></ol></ol><li><div>D(Delete):删除</div></li><ol><li><div>删除数据库</div></li><ol><li><div> drop database 数据库名称;</div></li></ol><li><div>判断数据库存在，存在再删除</div></li><ol><li><div>drop database if exists 数据库名称;</div></li></ol></ol><li><div>使用数据库</div></li><ol><li><div>查询当前正在使用的数据库名称</div></li><ol><li><div>select database();</div></li><li><div>use 数据库名称；</div></li></ol></ol></ol><li><div><span style="font-size: 12pt;">操作表</span></div></li><ul><li><div><span style="font-size: 11pt;">C(Create)创建</span></div></li></ul></ol></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>          <b><font style="font-size: 11pt;">  create table 表名(</font></b></div><div><b><font style="font-size: 11pt;">                列名1 数据类型1,</font></b></div><div><b><font style="font-size: 11pt;">                列名2 数据类型2,</font></b></div><div><b><font style="font-size: 11pt;">                ....</font></b></div><div><b><font style="font-size: 11pt;">                列名n 数据类型n</font></b></div><div><b><font style="font-size: 11pt;">            );</font></b></div><div><b><font style="font-size: 11pt;">            注意：最后一列，不需要加逗号（,）</font></b></div><div><b><font style="font-size: 11pt;">            * 数据库类型：</font></b></div><div><b><font style="font-size: 11pt;">                1. <font color="#FF0000">int</font>：整数类型</font></b></div><div><b><font style="font-size: 11pt;">                    * age int,</font></b></div><div><b><font style="font-size: 11pt;">                2. <font color="#FF0000">double</font>:小数类型</font></b></div><div><b><font style="font-size: 11pt;">                    * <font color="#2D4FC9">score double(5（一共有5位）,2（小数点后面保留2位）)</font></font></b></div><div><b><font style="font-size: 11pt;">                3. <font color="#FF0000">date</font>:日期，只包含年月日，yyyy-MM-dd</font></b></div><div><b><font style="font-size: 11pt;">                4. <font color="#FF0000">datetime</font>:日期，包含年月日时分秒     yyyy-MM-dd HH:mm:ss</font></b></div><div><b><font style="font-size: 11pt;">                5. <font color="#FF0000">timestamp</font>:时间戳类型    包含年月日时分秒     yyyy-MM-dd HH:mm:ss    </font></b></div><div><b><font style="font-size: 11pt;">                    * 如果将来不给这个字段赋值，或赋值为null，则默认使用当前的系统时间，来自动赋值</font></b></div><div><b><font><span style="font-size: 11pt;">                6.</span> <font color="#FF0000" style="font-size: 12pt;">varchar</font><span style="font-size: 11pt;">：字符串</span></font></b></div><div><b><font style="font-size: 11pt;">                    * name varchar(20):姓名最大20个字符</font></b></div><div><b><font style="font-size: 11pt;">                    * zhangsan 8个字符  张三 2个字符</font></b></div><div><b><font style="font-size: 12pt;">复制表：create table 表名 like 被复制的表名;</font><font style="font-size: 11pt;"> </font></b></div><div><b><font style="font-size: 11pt;">创建学生表示例：</font></b></div><div><b><font style="font-size: 11pt;">    create table student(</font></b></div><div><b><font style="font-size: 11pt;">        id int,</font></b></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>                name varchar(32),</b></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>                age int,</b></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>                score double(4,1),</b></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>                birthday date,</b></span></div><div><span style="font-size: 11pt; color: rgb(51, 51, 51); font-family: Monaco;"><b>                insert_time timestamp</b></span></div><div><b><font style="font-size: 11pt;">    );  </font></b>      </div></div><ul><ul><ul><li><div><span style="font-size: 11pt;">R(Retrieve):查询</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b><font style="font-size: 11pt;">查询某个数据库中所有的表名称</font></b></div><div><b><font style="font-size: 11pt;">    * show tables;</font></b></div><div><b><font style="font-size: 11pt;">查询表结构</font></b></div><div><b><font style="font-size: 11pt;">    * desc 表名;</font></b></div></div><ul><ul><ul><li><div>U(Update):修改</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b><font style="font-size: 11pt;">        1. 修改表名</font></b></div><div><b><font style="font-size: 11pt;">            alter table 表名 rename to 新的表名;</font></b></div><div><b><font style="font-size: 11pt;">        2. 修改表的字符集</font></b></div><div><b><font style="font-size: 11pt;">            alter table 表名 character set 字符集名称;</font></b></div><div><b><font style="font-size: 11pt;">        3. 添加一列</font></b></div><div><b><font style="font-size: 11pt;">            alter table 表名 add 列名 数据类型;</font></b></div><div><b><font style="font-size: 11pt;">        4. 修改列名称 类型</font></b></div><div><b><font style="font-size: 11pt;">            alter table 表名 change 列名 新列名 新数据类型;</font></b></div><div><b><font style="font-size: 11pt;">            alter table 表名 modify 列名 新数据类型;</font></b></div><div><b><font style="font-size: 11pt;">        5. 删除列</font></b></div><div><b><font style="font-size: 11pt;">            alter table 表名 drop 列名;</font></b></div></div><ul><ul><ul><li><div>D(Delete)：删除</div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b><font style="font-size: 11pt;">* drop table 表名;</font></b></div><div><b><font style="font-size: 11pt;">* drop table  if exists 表名</font></b></div></div><div><br/></div><ul><li><div><span style="font-size: 12pt; font-weight: bold;">DML增删改表中数据</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt;"><b>1. 添加数据：</b></span></div><div><span style="font-size: 11pt;"><b>    * 语法：</b></span></div><div><span style="font-size: 11pt;"><b>        * insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);</b></span></div><div>            insert into student(name,sex,information) values(&quot;周秦星&quot;,&quot;男&quot;,&quot;Java 学员&quot;);</div><div><span style="font-size: 11pt;"><b>    * 注意：</b></span></div><div><span style="font-size: 11pt;"><b>        1. 列名和值要一一对应。</b></span></div><div><span style="font-size: 11pt;"><b>        2. <font style="color: rgb(255, 0, 0);">如果表名后，不定义列名，则默认给所有列添加值</font></b></span></div><div><span style="font-size: 11pt;"><b>            insert into 表名 values(值1,值2,...值n);</b></span></div><div><span style="font-size: 11pt;"><b>        3. <font style="color: rgb(227, 0, 0);">除了数字类型，其他类型需要使用引号(单双都可以)引起来</font></b></span></div><div><span style="font-size: 11pt;"><b>2. 删除数据：</b></span></div><div><span style="font-size: 11pt;"><b>    * 语法：</b></span></div><div><span style="font-size: 11pt;"><b>        * delete from 表名 [where 条件]</b></span></div><div><span style="font-size: 11pt;"><b>    * 注意：</b></span></div><div><span style="font-size: 11pt;"><b>        1. 如果不加条件，则删除表中所有记录。</b></span></div><div><span style="font-size: 11pt;"><b>        2. 如果要删除所有记录</b></span></div><div><b><span style="font-size: 11pt;">            1.</span> <font style="font-size: 12pt;">delete from 表名</font><span style="font-size: 11pt;">; -- 不推荐使用。<font color="#FF0000">有多少条记录就会执行多少次删除操作,不会重置表结构</font></span></b></div><div><span style="font-size: 11pt;"><b>            2. TRUNCATE TABLE 表名; -- 推荐使用，效率更高 <font color="#FF0000">先删除表，然后再创建一张一样的表。</font>    truncate table tableNmae;</b></span></div><div><span style="font-size: 11pt;"><b>3. 修改数据：</b></span></div><div><span style="font-size: 11pt;"><b>    * 语法：</b></span></div><div><span style="font-size: 11pt;"><b>        * update 表名 set 列名1 = 值1, 列名2 = 值2,... [where 条件];</b></span></div><div><span style="font-size: 11pt;"><b>    * 注意：</b></span></div><div><span style="font-size: 11pt;"><b>        1. 如果不加任何条件，则会将表中所有记录全部修改。</b></span></div></div><div><br/></div><ul><li><div><span style="font-size: 11pt;"><span style="font-size: 11pt; font-weight: bold;">DQL:查询表中的记录</span></span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b><font style="font-size: 11pt;">* select * from 表名;</font></b></div><div><b><font style="font-size: 12pt;">1. 语法：select * from <font color="#FF0000">w g h o l</font></font></b></div><div><b><font style="font-size: 11pt;">    <font color="#2D4FC9">select</font></font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        字段列表</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">    from</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        表名列表</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">    where</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        条件列表</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">    group by</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        分组字段</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">    having</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        分组之后的条件</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">    order by</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        排序</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">    limit</font></b></div><div><b><font color="#2D4FC9" style="font-size: 11pt;">        分页限定</font></b></div><div><b><font style="font-size: 12pt;">2.基础查询</font></b></div><div><b><font style="font-size: 11pt;">    1. 多个字段的查询</font></b></div><div><b><font style="font-size: 11pt;">        select 字段名1，字段名2... from 表名；</font></b></div><div><b><font style="font-size: 11pt;">        * 注意：</font></b></div><div><b><font style="font-size: 11pt;">            * 如果查询所有字段，则可以使用*来替代字段列表。</font></b></div><div><b><font style="font-size: 11pt;">    2. 去除重复：</font></b></div><div><b><font style="font-size: 11pt;">       <font color="#3665EE"> * distinct</font></font></b></div><div><b><font style="font-size: 11pt;"><font style="color: rgb(54, 101, 238);">        示例：</font></font></b><font style="color: rgb(166, 0, 196);"><b>SELECT DISTINCT address FROM student;</b></font></div><div><b><font style="font-size: 11pt;">    3. <font color="#E30000">计算列</font></font></b></div><div><b><font style="font-size: 11pt;">        * 一般可以使用四则运算计算一些列的值。（一般只会进行<font color="#FF0000">数值型</font>的计算）</font></b></div><div><b><font style="font-size: 11pt;">        * ifnull(表达式1,表达式2)：null参与的运算，计算结果都为null</font></b></div><div><b><font style="font-size: 11pt;">            * 表达式1：哪个字段需要判断是否为null</font></b></div><div><b><font style="font-size: 11pt;">            * 如果该字段为null后的替换值。</font></b></div><div><b><font style="font-size: 11pt;">        示例：</font><font style="color: rgb(118, 0, 216);">SELECT NAME,address,english + IFNULL(chinaese,0) FROM student;</font></b></div><div><b><font style="font-size: 11pt;">    4. 起别名：</font></b></div><div><b><font style="font-size: 11pt;">        * <font color="#FF0000">as：as也可以省略</font></font></b></div><div><b><font style="font-size: 11pt;">       <font color="#2D4FC9"> </font></font></b><font style="color: rgb(45, 79, 201);"><b>SELECT NAME,IFNULL(english,0) + IFNULL(math,0) + IFNULL(chinaese,0) AS 总分 FROM student;</b></font></div><div><b><font style="font-size: 12pt;">3.条件查询</font></b></div><div><b><font style="font-size: 11pt;">    1. where子句后跟条件</font></b></div><div><b><font style="font-size: 11pt;">    2. 运算符</font></b></div><div><b><font style="font-size: 11pt;">        * &gt; 、&lt; 、&lt;= 、&gt;= 、= 、&lt;&gt;</font></b></div><div><b><font style="font-size: 11pt;">        <font color="#FF0000">* BETWEEN...AND  (大于等于，小于等于)</font></font></b></div><div><b><font style="font-size: 11pt;">        <font color="#FF0000">* IN( 集合)</font></font></b></div><div><b><font style="font-size: 11pt;">       <font color="#E30000"> * LIKE：模糊查询</font></font></b></div><div><b><font color="#E30000" style="font-size: 11pt;">            * 占位符：</font></b></div><div><b><font color="#E30000" style="font-size: 11pt;">                * _:单个任意字符</font></b></div><div><b><font color="#E30000" style="font-size: 11pt;">                * %：多个任意字符</font></b></div><div><b><font color="#E30000" style="font-size: 11pt;">        示例：</font></b><font color="#2D4FC9"><b>SELECT * FROM student WHERE NAME LIKE &quot;___&quot;;</b></font></div><div><font color="#2D4FC9"><b>                 SELECT * FROM student WHERE NAME LIKE &quot;%盖%&quot;;</b></font></div><div><b><font style="font-size: 11pt;">        <font color="#FF0000">* IS NULL </font> </font></b></div><div><b><font style="font-size: 11pt;">      <font color="#E30000">  * IS NOT NULL</font></font></b></div><div><b><font style="font-size: 11pt;">        * and  或 &amp;&amp;</font></b></div><div><b><font style="font-size: 11pt;">        * or  或 ||</font></b></div><div><b><font style="font-size: 11pt;">        * not  或 !</font></b></div><div><b><font style="font-size: 12pt;">4.排序查询</font></b></div><div><b><font style="font-size: 11pt;">    * 语法：order by 子句</font></b></div><div><b><font style="font-size: 11pt;">        * order by 排序字段1 排序方式1 ，  排序字段2 排序方式2...</font></b></div><div><b><font style="font-size: 11pt;">    * 排序方式：</font></b></div><div><b><font style="font-size: 11pt;">        * ASC：升序，默认的。</font></b></div><div><b><font style="font-size: 11pt;">        * DESC：降序。</font></b></div><div><b><font style="font-size: 11pt;">    * 注意：</font></b></div><div><b><font><span style="font-size: 11pt;">      </span><font style="font-size: 12pt; color: rgb(255, 0, 0);"><font face="Adobe 楷体 Std R">  </font><font style="font-family: 华文新魏;">* 如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件。</font></font></font></b></div><div><b><font style="font-size: 11pt;"><br/></font></b></div><div><b><font style="font-size: 12pt;">2. 聚合函数：将一列数据作为一个整体，进行纵向的计算。</font></b></div><div><b><font style="font-size: 11pt;">    1. count：计算个数</font></b></div><div><b><font style="font-size: 11pt;">        1. 一般选择非空的列：主键</font></b></div><div><b><font style="font-size: 11pt;">        2. count(*)</font></b></div><div><b><font style="font-size: 11pt;">    2. max：计算最大值</font></b></div><div><b><font style="font-size: 11pt;">    3. min：计算最小值</font></b></div><div><b><font style="font-size: 11pt;">    4. sum：计算和</font></b></div><div><b><font style="font-size: 11pt;">    5. avg：计算平均值</font></b></div><div><b><font><span style="font-size: 11pt;">    *</span> <span style="color: rgb(255, 0, 0); font-size: 11pt;">注意：</span><font color="#C6C500"><font style="font-size: 12pt;">聚合函数的计算，排除null值</font><span style="font-size: 11pt;">。</span></font></font></b></div><div><b><font color="#FF0000" style="font-size: 11pt;">        解决方案：</font></b></div><div><b><font color="#FF0000" style="font-size: 11pt;">            1. 选择不包含非空的列进行计算</font></b></div><div><b><font color="#FF0000" style="font-size: 11pt;">            2. IFNULL函数</font></b></div><div><b><font style="font-size: 12pt;">3. 分组查询:</font></b></div><div><b><font style="font-size: 11pt;">    1. 语法：group by 分组字段；</font></b></div><div><b><font style="font-size: 11pt;">    2. <font color="#E30000">注意：</font></font></b></div><div><b><font color="#E30000" style="font-size: 11pt;">        1. 分组之后查询的字段：分组字段、聚合函数</font></b></div><div><b><font color="#E30000" style="font-size: 11pt;">        2. where 和 having 的区别？</font></b></div><div><b><font style="font-size: 11pt;"><font color="#E30000">            1. where 在分组之前进行限定，如果不满足条件，则不参与分组。</font><font color="#FF0000">having在分组之后进行限定，如果不满足结果，则不会被查询出来</font></font></b></div><div><b><font style="font-size: 11pt;">            2.</font> <font color="#E30000" style="font-size: 12pt;">where 后不可以跟聚合函数，having可以进行聚合函数的判断。</font></b></div><div><b><font color="#E30000" style="font-size: 12pt;">        示例：</font></b><b><font color="#2D4FC9">SELECT sex,AVG(chinese),COUNT(sex) FROM student WHERE id &gt; 4 GROUP BY sex HAVING COUNT(sex) &gt; 1;</font></b></div><div><b><font style="font-size: 12pt;">4. 分页查询</font></b></div><div><b><font style="font-size: 11pt;">    1. 语法：limit 开始的索引,每页查询的条数;</font></b></div><div><b><font><span style="font-size: 11pt;">    2.</span> <font color="#FF0000" style="font-size: 12pt;">公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数</font></font></b></div><div><b><font style="font-size: 11pt;">        -- 每页显示3条记录</font></b></div><div><b><font style="font-size: 11pt;">        SELECT * FROM student LIMIT 0,3; -- 第1页</font></b></div><div><b><font style="font-size: 11pt;">        SELECT * FROM student LIMIT 3,3; -- 第2页</font></b></div><div><b><font style="font-size: 11pt;">        SELECT * FROM student LIMIT 6,3; -- 第3页</font></b></div><div><b><font style="font-size: 11pt;">    3. limit 是一个MySQL&quot;方言&quot;</font></b></div></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">三、约束</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 11pt;"><b>* 概念： 对表中的数据进行限定，保证数据的<font color="#FF0000">正确性、有效性和完整性</font>。    </b></span></div><div><span style="font-size: 11pt;"><b>* 分类：</b></span></div><div><span style="font-size: 11pt;"><b>    <font style="color: rgb(255, 0, 0);">1. 主键约束：primary key</font></b></span></div><div><span style="font-size: 11pt;"><b><font style="color: rgb(255, 0, 0);">    2. 非空约束：not null</font></b></span></div><div><span style="font-size: 11pt;"><b><font style="color: rgb(255, 0, 0);">    3. 唯一约束：unique</font></b></span></div><div><span style="font-size: 11pt;"><b><font style="color: rgb(255, 0, 0);">    4. 外键约束：foreign key</font></b></span></div><div><b><br/></b></div><div><span style="font-size: 11pt;"><b>* 非空约束：not null，某一列的值不能为null</b></span></div><div><span style="font-size: 11pt;"><b>    1. 创建表时添加约束</b></span></div><div><span style="font-size: 11pt;"><b>        CREATE TABLE stu(</b></span></div><div><span style="font-size: 11pt;"><b>            id INT,</b></span></div><div><span style="font-size: 11pt;"><b>            NAME VARCHAR(20) NOT NULL -- name为非空</b></span></div><div><span style="font-size: 11pt;"><b>        );</b></span></div><div><span style="font-size: 11pt;"><b>    2. <font color="#FF0000">创建表完后，添加非空约束</font></b></span></div><div><span style="font-size: 11pt;"><b>        ALTER TABLE stu MODIFY NAME VARCHAR(20) NOT NULL;</b></span></div><div><b><br/></b></div><div><span style="font-size: 11pt;"><b>    3. 删除name的<font color="#FF0000">非空约束</font></b></span></div><div><span style="font-size: 11pt;"><b><font style="color: rgb(255, 0, 0);">        ALTER TABLE stu MODIFY NAME VARCHAR(20);</font></b></span></div><div><b><br/></b></div><div><span style="font-size: 11pt;"><b>* 唯一约束：unique，某一列的值不能重复</b></span></div><div><span style="font-size: 11pt;"><b>    1. 注意：</b></span></div><div><span style="font-size: 11pt;"><b>        * <font style="color: rgb(255, 0, 0);">唯一约束可以有NULL值，null值可以重复</font></b></span></div><div><span style="font-size: 11pt;"><b>    2. 在创建表时，添加唯一约束</b></span></div><div><span style="font-size: 11pt;"><b>        CREATE TABLE stu(</b></span></div><div><span style="font-size: 11pt;"><b>            id INT,</b></span></div><div><span style="font-size: 11pt;"><b>            phone_number VARCHAR(20) UNIQUE -- 手机号</b></span></div><div><span style="font-size: 11pt;"><b>        );</b></span></div><div><span style="font-size: 11pt;"><b>    3. 删除唯一约束</b></span></div><div><span style="font-size: 11pt;"><b>        <font style="color: rgb(255, 0, 0);">ALTER TABLE stu DROP INDEX phone_number;</font></b></span></div><div><span style="font-size: 11pt;"><b>    4. 在表创建完后，<font color="#FF0000">添加唯一约束</font></b></span></div><div><span style="font-size: 11pt;"><b>        <font style="color: rgb(255, 0, 0);">ALTER TABLE stu MODIFY phone_number VARCHAR(20) UNIQUE;</font></b></span></div><div><b><br/></b></div><div><span style="font-size: 11pt;"><b>* 主键约束：primary key。</b></span></div><div><span style="font-size: 11pt;"><b>    1. 注意：</b></span></div><div><span style="font-size: 11pt;"><b>       <font color="#FF0000"> 1. 含义：非空且唯一</font></b></span></div><div><span style="font-size: 11pt;"><b><font color="#FF0000">        2. 一张表只能有一个字段为主键</font></b></span></div><div><span style="font-size: 11pt;"><b><font color="#FF0000">        3. 主键就是表中记录的唯一标识</font></b></span></div><div><b><br/></b></div><div><span style="font-size: 11pt;"><b>    2. 在创建表时，添加主键约束</b></span></div><div><span style="font-size: 11pt;"><b>        create table stu(</b></span></div><div><span style="font-size: 11pt;"><b>            id int primary key,-- 给id添加主键约束</b></span></div><div><span style="font-size: 11pt;"><b>            name varchar(20)</b></span></div><div><span style="font-size: 11pt;"><b>        );</b></span></div><div><span style="font-size: 11pt;"><b>    3. 删除主键</b></span></div><div><span style="font-size: 11pt;"><b>        -- 错误 alter table stu modify id int ;</b></span></div><div><span style="font-size: 11pt;"><b>        <font style="color: rgb(255, 0, 0);">ALTER TABLE stu DROP PRIMARY KEY;</font></b></span></div><div><span style="font-size: 11pt;"><b>    4. 创建完表后，<font color="#FF0000">添加主键</font></b></span></div><div><span style="font-size: 11pt;"><b>       <font style="color: rgb(255, 0, 0);"> ALTER TABLE stu MODIFY id INT PRIMARY KEY;</font></b></span></div><div><span style="font-size: 11pt;"><b>    5. 自动增长：</b></span></div><div><span style="font-size: 11pt;"><b>        1.概念：如果某一列是数值类型的，使用 auto_increment 可以来完成值得自动增长</b></span></div><div><span style="font-size: 11pt;"><b>        2. 在创建表时，添加主键约束，并且完成主键自增长</b></span></div><div><span style="font-size: 11pt;"><b>        create table stu(</b></span></div><div><span style="font-size: 11pt;"><b>            id int primary key auto_increment,-- 给id添加主键约束</b></span></div><div><span style="font-size: 11pt;"><b>            name varchar(20)</b></span></div><div><span style="font-size: 11pt;"><b>        );</b></span></div><div><span style="font-size: 11pt;"><b>        <font color="#FF0000">3. 删除自动增长</font></b></span></div><div><span style="font-size: 11pt;"><b>        <font style="color: rgb(255, 0, 0);">ALTER TABLE stu MODIFY id INT;</font></b></span></div><div><span style="font-size: 11pt;"><b><font color="#FF0000">        4. 添加自动增长</font></b></span></div><div><span style="font-size: 11pt;"><b><font color="#FF0000">        ALTER TABLE stu MODIFY id INT AUTO_INCREMENT;</font></b></span></div><div><b><font color="#FF0000" style="font-size: 12pt;"><br/></font></b></div><div><b><font color="#FF0000" style="font-size: 12pt;">* 外键约束：foreign key,让表于表产生关系，从而保证数据的正确性。</font></b></div><div><span style="font-size: 11pt;"><b>    1. 在创建表时，可以添加外键</b></span></div><div><span style="font-size: 11pt;"><b>        * 语法：</b></span></div><div><span style="font-size: 11pt;"><b>            create table 表名(</b></span></div><div><span style="font-size: 11pt;"><b>                ....</b></span></div><div><span style="font-size: 11pt;"><b>                外键列</b></span></div><div><b><span style="font-size: 11pt;">                </span><font color="#FF0000" style="font-size: 12pt;">constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称)</font></b></div><div><span style="font-size: 11pt;"><b>            );</b></span></div><div><b><br/></b></div><div><span style="font-size: 11pt;"><b>    2. 删除外键</b></span></div><div><span style="font-size: 11pt;"><b>       <font color="#E30000"> ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;</font></b></span></div><div><span style="font-size: 11pt;"><b>    3. 创建表之后，添加外键</b></span></div><div><span style="font-size: 11pt;"><b>        <font color="#FF0000">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);</font></b></span></div><div><span style="font-size: 11pt;"><b>    4. 级联操作</b></span></div><div><span style="font-size: 11pt;"><b>        1. 添加级联操作（on update cascade on delete cascade）</b></span></div><div><span style="font-size: 11pt;"><b>            语法：ALTER TABLE 表名 ADD CONSTRAINT 外键名称</b></span></div><div><span style="font-size: 11pt;"><b>                    FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称) <font color="#FF0000">ON UPDATE CASCADE ON DELETE CASCADE </font> ;</b></span></div><div><span style="font-size: 11pt;"><b>        2. 分类：</b></span></div><div><span style="font-size: 11pt;"><b>            1. <font color="#E30000">级联更新：ON UPDATE CASCADE</font></b></span></div><div><span style="font-size: 11pt;"><b>            2. <font color="#E30000">级联删除：ON DELETE CASCADE</font></b></span></div></div><div><span style="font-size: 14pt; font-weight: bold;">四、数据库的设计</span></div><div><span style="font-size: 12pt;">一对一关系</span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;"><img src="数据库_files/一对一关系实现.bmp" type="image/bmp" data-filename="一对一关系实现.bmp" width="788"/></span></span></div><div><span style="font-size: 12pt;">一对多关系</span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;"><img src="数据库_files/一对多关系实现.bmp" type="image/bmp" data-filename="一对多关系实现.bmp" width="691"/></span></span></div><div><span style="font-size: 12pt;">多对多关系</span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;"><img src="数据库_files/多对多关系实现.bmp" type="image/bmp" data-filename="多对多关系实现.bmp" width="597"/></span></span></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b><font style="font-size: 12pt;">1. 多表之间的关系</font></b></div><div><b>  <font style="font-size: 11pt;">  1. 分类：</font></b></div><div><b><font style="font-size: 11pt;">        1. 一对一(了解)：</font></b></div><div><b><font style="font-size: 11pt;">            * 如：人和身份证</font></b></div><div><b><font style="font-size: 11pt;">            * 分析：一个人只有一个身份证，一个身份证只能对应一个人</font></b></div><div><b><font style="font-size: 11pt;">        2. 一对多(多对一)：</font></b></div><div><b><font style="font-size: 11pt;">            * 如：部门和员工</font></b></div><div><b><font style="font-size: 11pt;">            * 分析：一个部门有多个员工，一个员工只能对应一个部门</font></b></div><div><b><font style="font-size: 11pt;">        3. 多对多：</font></b></div><div><b><font style="font-size: 11pt;">            * 如：学生和课程</font></b></div><div><b><font style="font-size: 11pt;">            * 分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择</font></b></div><div><b><font style="font-size: 11pt;">    2. 实现关系：</font></b></div><div><b><font style="font-size: 11pt;">        1. 一对多(多对一)：</font></b></div><div><b><font style="font-size: 11pt;">            * 如：部门和员工</font></b></div><div><b><font style="font-size: 11pt;">            * 实现方式：<font color="#FF0000">在多的一方建立外键，指向一的一方的主键。</font></font></b></div><div><font color="#FF0000"><span style="font-size: 14.6667px;"><b>示例：</b></span></font></div><div>CREATE TABLE employee(</div><div>    id INT PRIMARY KEY AUTO_INCREMENT,</div><div>    NAME VARCHAR(20),</div><div>    age INT,</div><div>    del_id INT,-- 外键对应主表的主键</div><div>    CONSTRAINT emp_dep FOREIGN KEY (del_id) REFERENCES deparment(id)</div><div>);</div><div><b><font style="font-size: 11pt;">        2. 多对多：</font></b></div><div><b><font style="font-size: 11pt;">            * 如：学生和课程</font></b></div><div><b><font style="font-size: 11pt;">            * 实现方式：<font color="#FF0000">多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键</font></font></b></div><div><font color="#FF0000"><span style="font-size: 14.6667px;"><b>示例：</b></span></font></div><div>CREATE TABLE tab_favorite(</div><div>    rid INT,</div><div>    DATE DATETIME,</div><div>    uid INT,</div><div>    PRIMARY KEY(rid,uid),</div><div>    FOREIGN KEY (rid) REFERENCES tab_route(rid),</div><div>    FOREIGN KEY(uid) REFERENCES tab_user(uid)</div><div>);</div><div><b><font style="font-size: 11pt;">        3. 一对一(了解)：</font></b></div><div><b><font style="font-size: 11pt;">            * 如：人和身份证</font></b></div><div><b><font style="font-size: 11pt;">            * 实现方式：<font color="#FF0000">一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</font></font></b></div><div><b><font style="font-size: 12pt;"><br/></font></b></div><div><font color="#3665EE" style="font-size: 12pt;"><b>2. 数据库设计的范式</b></font></div><div><b><font style="font-size: 11pt;">    * 概念：设计数据库时，需要遵循的一些规范。<font color="#FF0000">要遵循后边的范式要求，必须先遵循前边的所有范式要求</font></font></b></div><div><b><font style="font-size: 11pt;">        设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，越高的范式数据库冗余越小。</font></b></div><div><b><font style="font-size: 11pt;">        目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。</font></b></div><div><b><font style="font-size: 11pt;"><br/></font></b></div><div><b><font style="font-size: 11pt;">    * 分类：</font></b></div><div><b><font style="font-size: 11pt;">        1.</font> <font style="font-size: 12pt;">第一范式（1NF）</font><font style="font-size: 11pt;">：每一列都是不可分割的原子数据项</font></b></div><div><b><font style="font-size: 11pt;">            存在问题：</font></b></div><div><b><font style="font-size: 11pt;">                <font color="#3665EE">1.存在非常严重额数据冗余（重复）</font></font></b></div><div><b><font color="#3665EE" style="font-size: 11pt;">                2.数据添加存在问题，数据会不合法</font></b></div><div><b><font style="font-size: 11pt;"><font color="#3665EE">                3.数据删除存在问题，删除数据，会将其他数据一起删除</font>    </font></b></div><div><b><font style="font-size: 11pt;">        2.</font> <font style="font-size: 12pt;">第二范式（2NF）</font><font style="font-size: 11pt;">：在1NF的基础上，<font color="#FF0000">非码属性必须完全依赖于码</font>（在1NF基础上消除非主属性对主码的部分函数依赖）</font></b></div><div><b><font style="font-size: 11pt;">            * 几个概念：</font></b></div><div><b><font style="font-size: 11pt;">                <font color="#FF0000">1.</font> <font color="#E30000">函数依赖</font>：A--&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A</font></b></div><div><b><font style="font-size: 11pt;">                    例如：学号--&gt;姓名。  （学号，课程名称） --&gt; 分数</font></b></div><div><b><font style="font-size: 11pt;">                <font color="#FF0000">2. 完全函数依赖</font>：A--&gt;B， 如果A是一个属性组，则B属性值的确定需要依赖于A属性组中所有的属性值。</font></b></div><div><b><font style="font-size: 11pt;">                    例如：（学号，课程名称） --&gt; 分数</font></b></div><div><b><font style="font-size: 11pt;">                <font color="#FF0000">3. 部分函数依赖</font>：A--&gt;B， 如果A是一个属性组，则B属性值的确定只需要依赖于A属性组中某一些值即可。</font></b></div><div><b><font style="font-size: 11pt;">                    例如：（学号，课程名称） -- &gt; 姓名</font></b></div><div><b><font style="font-size: 11pt;">                <font color="#FF0000">4. 传递函数依赖</font>：A--&gt;B, B -- &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A</font></b></div><div><b><font style="font-size: 11pt;">                    例如：学号--&gt;系名，系名--&gt;系主任</font></b></div><div><b><font><span style="font-size: 11pt;">                </span><font color="#FF0000" style="font-size: 11pt;">5.</font> <font color="#4DCE1D" style="font-size: 12pt;">码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码</font></font></b></div><div><b><font style="font-size: 11pt;">                    例如：该表中码为：（学号，课程名称）</font></b></div><div><b><font style="font-size: 11pt;">                    <font color="#FF0000">* 主属性：码属性组中的所有属性</font></font></b></div><div><b><font color="#FF0000" style="font-size: 11pt;">                    * 非主属性：除过码属性组的属性</font></b></div><div><b><font color="#FF0000" style="font-size: 11pt;">            存在问题：</font></b></div><div><b><font color="#FF0000"><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">    </span><span style="font-size: 11pt;">      </span> <font style="font-size: 11pt;"> </font></font></b><font style="font-size: 11pt;"><b>2.数据添加存在问题，数据会不合法</b></font></div><div><font style="font-size: 11pt;"><b>                3.数据删除存在问题，删除数据，会将其他数据一起删除</b></font></div><div><b><font style="font-size: 11pt;">        3.</font> <font style="font-size: 12pt;">第三范式（3NF）</font><font style="font-size: 11pt;">：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</font></b></div></div><div><font style="font-size: 11pt;"><br/></font></div><div><span style="font-size: 14pt; font-weight: bold;">五、数据库的备份和还原</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><b><font style="font-size: 11pt;">1. 命令行：</font></b></div><div><b><font style="font-size: 11pt;">    * 语法：</font></b></div><div><b><font style="font-size: 11pt;">        * 备份： mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</font></b></div><div><b><font style="font-size: 11pt;">        * 还原：</font></b></div><div><b><font style="font-size: 11pt;">            1. 登录数据库</font></b></div><div><b><font style="font-size: 11pt;">            2. 创建数据库</font></b></div><div><b><font style="font-size: 11pt;">            3. 使用数据库</font></b></div><div><b><font style="font-size: 11pt;">            4. 执行文件。source 文件路径</font></b></div><div><b><font style="font-size: 11pt;">2. 图形化工具：</font></b></div></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">六、多表查询</span></font></div><ol><li><div><span style="font-size: 14.6667px;">笛卡尔积：</span></div></li><ol><li><div><span style="font-size: 14.6667px;">有两个集合A，B，取这两个集合的所有组成情况</span></div></li></ol><li><div><span style="font-size: 14.6667px;">多表查询分类</span></div></li></ol><ol><ol><li><div><span style="font-size: 14.6667px;">内连接查询</span></div></li><ul><li><div><span style="font-size: 14.6667px;">隐式内连接：使用where条件查询</span></div></li><ul><li><div><span style="font-size: 14.6667px;">示例：</span></div></li></ul></ul></ol></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>SELECT</div><div>    t1.name,t2.name,t1.salary</div><div>FROM</div><div>    emp t1,dept t2</div><div>WHERE</div><div>    t1.dep_id = t2.id;</div></div><ul><ul><ul><li><div><span style="font-size: 14.6667px;">显式内连接:select 字段列表 from 表名1 inner join 表名2 on 条件</span></div></li></ul></ul></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>SELECT</div><div>    *</div><div>FROM</div><div>    emp</div><div>INNER JOIN</div><div>    dept</div><div>ON</div><div>    emp.dep_id = dept.id;</div></div><ul><ul><li><div><span style="font-size: 14.6667px;">内连接查询</span></div></li><ul><li><div><span style="font-size: 14.6667px;">从哪些表中查询数据</span></div></li><li><div><span style="font-size: 14.6667px;">条件是什么</span></div></li><li><div><span style="font-size: 14.6667px;">查询哪些字段</span></div></li></ul></ul></ul><ol><ol><li><div><span style="font-size: 14.6667px;">外连接查询</span></div></li><ul><li><div><span style="font-size: 14.6667px;">左外连接（不管关联的条件是否成立，都会查询左表的数据）</span></div></li><ul><li><div><span style="font-size: 14.6667px;">语法：select 字段列表 from 表1 left outer join 表2 on 条件</span></div></li><li><div><span style="font-size: 14.6667px;">示例</span></div></li></ul></ul></ol></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>SELECT</div><div>    t1.*,t2.name</div><div>FROM</div><div>    emp t1</div><div>LEFT OUTER JOIN</div><div>    dept t2</div><div>ON</div><div>    t1.dep_id = t2.id;</div></div><ol><ol><ul><ul><li><div><span style="font-size: 14.6667px;">查询的是左表左右数据的交集部分</span></div></li></ul><li><div><span style="font-size: 14.6667px;">右外连接</span><span style="font-size: 14.6667px;">（不管关联的条件是否成立，都会查询右表的数据）</span></div></li><ul><li><div><span style="font-size: 14.6667px;">语法：</span><span style="font-size: 14.6667px;">select 字段列表 from 表1 right outer join 表2 on 条件</span></div></li></ul></ul><li><div><span style="font-size: 14.6667px;">子查询</span></div></li><ol><li><div><span style="font-size: 14.6667px;">概念：查询中嵌套查询，称嵌套查询为子查询</span></div></li><ul><li><div><span style="font-size: 14.6667px;">示例：</span><span style="font-size: 11pt;">SELECT * FROM emp WHERE salary = (SELECT MAX(salary) FROM emp);</span></div></li></ul><li><div><span style="font-size: 14.6667px;">子查询的不同情况</span></div></li><ul><li><div><span style="font-size: 14.6667px;">子查询的结果是单行单列的</span></div></li><ul><li><div><span style="font-size: 14.6667px;">子查询可以作为条件，<span style="font-size: 14.6667px; color: rgb(255, 0, 0);">使用运算符去判断</span></span></div></li><li><div><span style="font-size: 11pt;">示例：SELECT * FROM emp WHERE emp.salary &lt; (SELECT AVG(salary) FROM emp);</span></div></li></ul><li><div><span style="font-size: 14.6667px;">子查询的结果是多行单列的</span></div></li><ul><li><div><span style="font-size: 14.6667px;">子查询可以作为条件，<span style="font-size: 14.6667px; color: rgb(255, 0, 0);">使用运算符in来判断</span></span></div></li><li><div><span style="font-size: 11pt;">示例：SELECT * FROM emp WHERE dep_id IN (SELECT id FROM dept WHERE NAME = '市场部' OR NAME = '财务部');</span></div></li></ul><li><div><span style="font-size: 14.6667px;">子查询的结果是多行多列的</span></div></li><ul><li><div><span style="font-size: 14.6667px;">子查询作为一张<span style="font-size: 14.6667px; color: rgb(255, 0, 0);">虚拟表进行查询</span></span></div></li><li><div><span style="font-size: 14.6667px;">示例：</span><span style="font-size: 11pt;">SELECT * FROM emp t1,(SELECT * FROM emp WHERE join_date &gt; '2011-11-11') t2 WHERE t1.dep_id = t2.id;</span></div></li></ul></ul></ol></ol></ol><div><span style="font-size: 14pt; font-weight: bold;">七、事务</span></div><ol><li><div><span style="font-size: 14.6667px;">基本介绍</span></div></li><ol><li><div><span style="font-size: 14.6667px;">概念：如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败</span></div></li><li><div><span style="font-size: 14.6667px;">操作：</span></div></li><ol><li><div><span style="font-size: 14.6667px;">开启事务：start transaction</span></div></li><li><div>回滚：rollback</div></li><li><div>提交事务：commit</div></li></ol><li><div>总结: 如果事务中 SQL 语句没有问题，commit 提交事务，会对数据库数据的数据进行改变。 如果事务中 SQL 语句有问题，rollback 回滚事务，会回退到开启事务时的状态。</div></li></ol><li><div>MySQL事务自动提交</div></li><ol><li><div>事务提交的两种方式</div></li><ol><li><div>自动提交</div></li><ul><li><div>MySQL就是自动提交的</div></li><li><div>一条DML语句会自动提交一次事务</div></li></ul><li><div>手动提交</div></li><ul><li><div>需要先开启事务，再提交</div></li></ul></ol><li><div>修改事务的默认提交方式</div></li><ol><li><div><font color="#2D4FC9" style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201); font-weight: bold;">查看事务的默认提交方式：select @@autocommit;   --1：代表自动提交，0：代表手动提交</span></font></div></li><li><div><font style="font-size: 11pt;"><span style="font-size: 11pt; color: rgb(45, 79, 201); font-weight: bold;">修改默认提交方式：set @@autocommit = 0;</span></font></div></li></ol></ol><li><div><span style="font-size: 14.6667px;">四大特征</span></div></li><ol><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(255, 0, 0);">原子性：不可分割的最小单位，要么同时成功，要么同时失败</span></span></div></li><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(255, 0, 0);">持久性：当事务提交或回滚后，数据库会持久化的保存数据</span></span></div></li><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(255, 0, 0);">隔离性：多个事务之间，相互独立。</span></span></div></li><li><div><span style="font-size: 14.6667px;"><span style="font-size: 14.6667px; color: rgb(255, 0, 0);">一致性：事务操作前后，数据总量不变</span></span></div></li></ol><li><div><span style="font-size: 14.6667px;">隔离级别（了解）</span></div></li><ol><li><div><span style="font-size: 14.6667px;">概念：多个事务之间隔离的，相互独立，但是如果多个事务操作同一批数据，则会引发一些问题，设置不同的隔离级别就可以解决这些问题</span></div></li><li><div><span style="font-size: 14.6667px;">存在问题：</span></div></li><ol><li><div><span style="font-size: 14.6667px;">脏读：一个事务，读取到另一个事务中没有提交的数据</span></div></li><li><div><span style="font-size: 14.6667px;">不可重复读：在同一个事务中，两次读取到的数据不一样</span></div></li><li><div><span style="font-size: 14.6667px;">幻读：一个事务操作DML数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改</span></div></li></ol><li><div><span style="font-size: 14.6667px;">隔离级别：</span></div></li><ol><li><div><span style="color: rgb(186, 0, 255);">read uncommitted:读未提交</span></div></li><ol><li><div><span style="color: rgb(186, 0, 255);">产生问题：脏读、不可重复读、幻读</span></div></li></ol><li><div><span style="color: rgb(186, 0, 255);">read committed:读已提交（oracle默认）   </span></div></li></ol></ol><ol><ol><ol><li><div><span style="color: rgb(186, 0, 255);">产生问题：不可重复读，幻读</span></div></li></ol><li><div><span style="color: rgb(186, 0, 255);">repeatable read:可重复读（mysql默认）</span></div></li><ol><li><div><span style="color: rgb(186, 0, 255);">产生问题：幻读</span></div></li></ol><li><div><span style="color: rgb(186, 0, 255);">serializable:</span></div></li><ol><li><div><span style="color: rgb(186, 0, 255);">可以解决所有问题</span></div></li></ol><li><div>注意：隔离几倍从小到大，安全性变高，但是效率变低</div></li></ol></ol><ol><ol><li><div><span style="color: rgb(227, 0, 0);">查询隔离级别 select @@tx_isolation;</span></div></li><li><div><span style="color: rgb(227, 0, 0);">设置隔离级别 <span style="color: rgb(227, 0, 0); font-weight: bold;">set global transaction isolation level 级别字符串;</span></span></div></li></ol></ol><li><div><span style="color: rgb(227, 0, 0);">事务原理</span><span style="color: rgb(227, 0, 0);"><img src="数据库_files/ScreenClip.png" type="image/png" data-filename="ScreenClip.png" width="993"/></span></div></li><li><div>回滚点</div></li><ol><li><div>概念：在某些成功的操作完成之后，后续的操作有可能成功有可能失败，但是不管成功还是失败，前面操作都已经成 功，可以在当前成功的位置设置一个回滚点。可以供后续失败操作返回到该位置，而不是返回所有操作，这个点称 之为回滚点</div></li></ol></ol><div><span style="font-size: 14pt; font-weight: bold;">八、DCL</span></div><ol><li><div><span style="font-size: 14.6667px;">管理用户</span></div></li><ol><li><div><span style="font-size: 14.6667px;">添加用户</span></div></li><ol><li><div>语法：create user '用户名'@'主机名' identified by '密码';</div></li><li><div>示例：CREATE USER 'king'@'%' IDENTIFIED BY '1996';</div></li></ol><li><div><span style="font-size: 14.6667px;">删除用户</span></div></li><ol><li><div>语法：drop user '用户名'@'主机名';</div></li></ol><li><div><span style="font-size: 14.6667px;">修改用户密码</span></div></li><ol><li><div><span style="font-size: 11pt;">set password '用户名'@'主机名' = password('新密码');</span></div></li></ol><li><div><span style="font-size: 14.6667px;">查询用户</span></div></li><li><div><span style="font-size: 14.6667px;">忘记密码</span></div></li><ol><li><div><span style="font-size: 14.6667px;">stop mysql;(停止MySQL服务，需要管理员权限）</span></div></li><li><div><span style="font-size: 14.6667px;">使用无验证方式启动MySQL服务：mysqld --skip-grant--tables</span></div></li><li><div><span style="font-size: 14.6667px;">cmd可以直接登录</span></div></li><li><div><span style="font-size: 14.6667px;">修改密码</span></div></li><li><div><span style="font-size: 14.6667px;">手动结束mysqld的进程</span></div></li><li><div><span style="font-size: 14.6667px;">启动MySQL服务</span></div></li><li><div><span style="font-size: 14.6667px;">使用新密码登录</span></div></li></ol></ol><li><div><span style="font-size: 14.6667px;">授权</span></div></li><ol><li><div><span style="font-size: 14.6667px;">查询权限：show grants for '用户名'@'主机名';</span></div></li><li><div><span style="font-size: 14.6667px;">授予权限：grant 权限列表 on 数据库名.表名 to '用户名'@'主机名';</span></div></li><li><div>撤销权限：revoke 权限列表 on 数据库名.表名 from '用户名'@'主机名';</div></li></ol></ol><div><span style="font-size: 11pt;">            </span></div><div><a href="数据库_files/MySQL多表查询与事务的操作.pdf"><img src="数据库_files/fdeafefd4e58daf98f122b9f6eb8cd67.png" alt="MySQL多表查询与事务的操作.pdf"></a></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div><div><font style="font-size: 11pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 