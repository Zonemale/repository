<html>
<head>
  <title>orcale</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600388 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2076"/>
<h1>orcale</h1>

<div>
<span><div><div>orcale默认端口是1521，只有一个数据库orcl</div><div><span style="font-size: 14pt; font-weight: bold;">一、oracle体系结构</span></div><ol><li><div><span style="font-size: 16px;">数据库</span></div></li><ol><li><div><span style="font-size: 12pt;">Oracle 数据库是数据的物理存储，oracle只是一个大数据库</span></div></li></ol><li><div><span style="font-size: 12pt;">实例</span></div></li><ol><li><div><span style="font-size: 12pt;">一个 Oracle 实例（Oracle Instance）有一系列的后台进程（Backguound Processes)和内存结构</span><span style="font-size: 12pt;">（Memory Structures)组成。一个数据库可以有 n 个实例。</span></div></li></ol><li><div><span style="font-size: 16px;">用户</span></div></li><ol><li><div><span style="font-size: 12pt;">用户是在实例下建立的。不同实例可以建相同名字的用户。</span></div></li></ol><li><div><span style="font-size: 16px;">表空间</span></div></li><ol><li><div><span style="font-size: 12pt;">表空间是 Oracle 对物理数据库上相关数据文件（ORA或者 DBF 文件）的逻辑映射，</span><span style="font-size: 12pt;">一个数</span><span style="font-size: 12pt;">据库在逻辑上被划分成一到若干个表空间，每个表空间包含了在逻辑上相关联的一组结构。每</span><span style="font-size: 12pt;">个数据库至少有一个表空间(称之为system表空间)。</span></div></li></ol><li><div><span style="font-size: 16px;">数据文件（dbf、ora）</span></div></li><ol><li><div><span style="font-size: 12pt;">数据文件是数据库的物理存储单位。数据库的数据是存储在表空间中的，真正是在某一个</span><span style="font-size: 12pt;">或者多个数据文件中。而一个表空间可以由一个或多个数据文件组成，一个数据文件只能属于</span><span style="font-size: 12pt;">一个表空间。一旦数据文件被加入到某个表空间后，就不能删除这个文件，如果要删除某个数</span><span style="font-size: 12pt;">据文件，只能删除其所属于的表空间才行。</span></div></li></ol></ol><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">二、oracle中双引号用于起别名，单引号用于定义字符串</span></span></div><ol><li><div><span style="font-size: 16px; font-weight: bold;">创建表空间：</span><span style="font-size: 12pt;">一个数据库下可以建立多个表空间，一个表空间可以建立多个用户、一个用户下可以建立</span><span style="font-size: 12pt;">多个表。</span></div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>--创建表空间</div><div>create tablespace vaught</div><div>datafile 'c:\vaught.dbf'</div><div>size 100m</div><div>autoextend on</div><div>next 10m;</div><div><br/></div><div>vaught为表空间名称</div><div>datafile 指定表空间对应的数据文件</div><div>size 后定义的是表空间的初始大小</div><div>autoextend on 自动增长 ，当表空间存储都占满时，自动增长</div><div>next 后指定的是一次自动增长的大小。</div></div><ol><li><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">创建用户</span></span></div></li></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 12pt;">create user itcastuser</span></div><div><span style="font-size: 12pt;">identified by itcast</span></div><div><span style="font-size: 12pt;">default tablespace itcast</span></div><div><br/></div><div><span style="font-size: 12pt;">identified by 后边是用户的密码</span></div><div><span style="font-size: 12pt;">default tablespace 后边是表空间名称</span></div><div><span style="font-size: 12pt;">oracle 数据库与其它数据库产品的区别在于，表和其它的数据库对象都是存储在用户</span></div><div><span style="font-size: 12pt;">下的。</span></div><div><br/></div><div><span style="font-size: 12pt;">oracle数据库中常用的角色</span></div><div><span style="font-size: 12pt;">connect--连接角色，基本角色</span></div><div><span style="font-size: 12pt;">resource--开发者角色</span></div><div><span style="font-size: 12pt;">dba--超级管理员角色</span></div><div><br/></div><div><span style="font-size: 12pt;">给用户授权</span></div><div><span style="font-size: 12pt;">grant dba to vaught;</span></div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">三、oracle数据类型</span></span></div><ol><li><div><span style="font-size: 16px;">varchar2/varchar:</span><span style="font-size: 12pt;">表示一个字符串</span></div></li><li><div><span style="font-size: 12pt;">number:</span><span style="font-size: 12pt;">NUMBER(n)表示一个整数，长度是n,</span><span style="font-size: 12pt;">NUMBER(m,n):表示一个小数，总长度是 m，小</span><span style="font-size: 12pt;">数是 n，整数是 m-n</span></div></li><li><div><span style="font-size: 12pt;">date:</span><span style="font-size: 12pt;">表示日期类型</span></div></li><li><div><span style="font-size: 12pt;">clob:</span><span style="font-size: 12pt;">大对象，表示大文本数据类型，可存 4G</span></div></li><li><div><span style="font-size: 12pt;">blob:</span><span style="font-size: 12pt;">大对象，表示二进制数据，可存 4G</span></div></li></ol><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">四、序列</span></span></div><ol><li><div><span style="font-size: 16px;">序列不属于任何一张表，但是逻辑可以和表做绑定</span></div></li><li><div><span style="font-size: 12pt;">在很多数据库中都存在一个自动增长的列,如果现在要想在 oracle 中完成自动增长的功能,</span><span style="font-size: 12pt;">则只能依靠序列完成,所有的自动增长操作,需要用户手工完成处理。</span></div></li><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(235, 0, 115);">语法：CREATE SEQUENCE 序列名</span></span></div></li><ol><li><div><span style="font-size: 12pt; color: rgb(235, 0, 115);">[INCREMENT BY n]：每次增长个数</span></div></li><li><div><span style="font-size: 12pt; color: rgb(235, 0, 115);">[START WITH n]：开始数字</span></div></li><li><div><span style="font-size: 12pt; color: rgb(235, 0, 115);">[{CACHE n|NOCACHE}]：缓存</span></div></li></ol><li><div><span style="font-size: 12pt;">范例:创建一个 seqpersonid的序列,验证自动增长的操作</span></div></li><ol><li><div><span style="font-size: 12pt;">CREATE SEQUENCE seqpersonid;</span></div></li><li><div><span style="font-size: 12pt;">序列创建完成之后,所有的自动增长应该由用户自己处理,所以在序列中提供了以下的两种操作：</span></div></li><li><div><span style="font-size: 12pt;">nextval :取得序列的下一个内容</span></div></li><li><div><span style="font-size: 12pt;">currval :取得序列的当前内容</span></div></li><li><div><span style="font-size: 12pt;">select seqpersonid.nextval from dual;</span></div></li><li><div><span style="font-size: 12pt;">select seqpersonid.currval from dual;</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">insert</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">into</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">person</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">values</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(s_person.nextval,</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">'第二梦'</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">0</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">);</span></div></li><li><div><span style="font-size: 16px;">注：dual是一张虚表，只是为了补全代码</span></div></li></ol></ol><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">五、单行函数</span></span></div><ol><li><div><span style="font-size: 12pt;">把小写的字符转换成大小的字符</span></div></li><ol><li><div><span style="font-size: 12pt;">upper('smith')</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">upper</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">'what'</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">dual;</span></div></li></ol><li><div><span style="font-size: 12pt;">把大写字符变成小写字符</span></div></li><ol><li><div><span style="font-size: 12pt;">lower('SMITH')</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">lower</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">'what'</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">dual;</span></div></li></ol><li><div><span style="font-size: 16px;">数值函数</span></div></li><ol><li><div><span style="font-size: 12pt;">四舍五入函数：ROUND()</span></div></li><li><div><span style="font-size: 16px;">向下取整函数：trunc()</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">round</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">23.521</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">2</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">dual;</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">trunc</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">23.521</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,-</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">1</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">dual;</span></div></li></ol><li><div><span style="font-size: 16px;">日期函数（日期可以和数字加减）</span></div></li><ol><li><div><span style="font-size: 12pt;">日期 – 数字 = 日期</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">sysdate</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">-e.hiredate</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">emp e;</span></div></li><li><div><span style="font-size: 12pt;">日期 + 数字 = 日期</span></div></li><li><div><span style="font-size: 12pt;">日期 – 日期 = 数字</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">round</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(months_between(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">sysdate</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,e.hiredate)/</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">12</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">emp e;</span></div></li></ol><li><div><span style="font-size: 16px;">转换函数</span></div></li><ol><li><div><span style="font-size: 12pt;">TO_CHAR:字符串转换函数</span></div></li><li><div><span style="font-size: 12pt;">to_date:日期转换函数</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">to_char(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">sysdate</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">'yyyy-mm-dd hh:mi:ss'</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">dual;</span></div></li></ol><li><div><span style="font-size: 16px;">通用函数</span></div></li><ol><li><div><span style="font-size: 12pt;">空值处理nvl</span></div></li><ol><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">e.sal*</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">12</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">+</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">nvl</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(e.comm,</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 255); font-family: &quot;Courier New&quot;;">0</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">)</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">emp e;</span></div></li></ol><li><div><span style="font-size: 12pt;">.Decode函数，</span><span style="font-size: 12pt;">该函数类似 if....else if...esle</span></div></li><ol><li><div><span style="font-size: 12pt;">语法：DECODE(col/expression, [search1,result1],[search2, result2]....[default])</span></div></li><li><div><span style="font-size: 12pt;">Col/expression:列名或表达式</span></div></li><li><div><span style="font-size: 12pt;">Search1，search2...:用于比较的条件</span></div></li><li><div><span style="font-size: 12pt;">Result1, result2...:返回值</span></div></li><li><div><span style="font-size: 12pt;">如果 col/expression 和 Searchi匹配就返回 resulti,否则返回 default 的默认值</span></div></li></ol><li><div><span style="font-size: 12pt;">case when</span></div></li></ol></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>示例：</div><div>select e.ename,</div><div>       case e.ename</div><div>         when 'SMITH' then '王林垚'</div><div>           when 'ALLEN' then '高鹏'</div><div>             when 'JONES' then '周秦星'</div><div>           else '还有谁'</div><div>             end</div><div>             from emp e;</div></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">六、多行函数</span></span></div><ol><li><div><span style="font-size: 12pt;">统计记录数 count()</span></div></li><li><div><span style="font-size: 12pt;">最小值查询 min()</span></div></li><li><div><span style="font-size: 12pt;">最大值查询 max()</span></div></li><li><div><span style="font-size: 12pt;">查询平均值 avg()</span></div></li><li><div><span style="font-size: 12pt;">求和函数 sum()</span></div></li></ol><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">七、分组统计</span></span></div><ol><li><div><span style="font-size: 12pt;">分组统计需要使用 GROUP BY来分组</span></div></li><ol><li><div><span style="font-size: 12pt;">语法：语法：SELECT * |列名 FROM 表名 {WEHRE 查询条件} {GROUP BY 分组字段} ORDER BY 列</span><span style="font-size: 12pt;">名 1 ASC|DESC，列名 2...ASC|DESC</span></div></li></ol></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>示例：</div><div>select deptno,avg(sal)</div><div>from emp</div><div>group by deptno;</div></div><ol><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0);">注意：</span></span></div></li><ol><li><div><span style="font-size: 12pt; color: rgb(255, 0, 0);">如果使用分组函数，SQL  只可以把 GROUP BY  分组条件字段和分组函数查询出来，不能有其</span><span style="font-size: 12pt; color: rgb(255, 0, 0);">他字段。</span></div></li><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0);">如果使用分组函数，不使用  GROUP BY</span></span></div></li></ol></ol><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>示例：</div><div>select e.deptno,avg(sal)</div><div>from emp e,dept d</div><div>group by e.deptno</div><div>having avg(sal) &gt; 2000;</div></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">八、多表查询</span></span></div><ol><li><div><span style="font-size: 12pt;">使用一张以上的表做查询就是多表查询</span></div></li><ol><li><div><span style="font-size: 12pt;">语法： SELECT {DISTINCT} *|列名.. FROM 表名 别名，表名 1 别名</span><span style="font-size: 12pt;">{WHERE 限制条件 ORDER BY 排序字段 ASC|DESC...}</span></div></li></ol><li><div><span style="font-size: 12pt;">外连接（左右连接）</span></div></li></ol><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">九、子查询</span></span></div><ol><li><div><span style="font-size: 12pt;">子查询：在一个查询的内部还包括另一个查询，则此查询称为子查询。</span></div></li><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 0, 0);">Sql的任何位置都可以加入子查询</span></span></div></li></ol><div><font style="font-size: 14pt;"><span style="font-size: 14pt; font-weight: bold;">十、自连接</span></font></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div>select * from</div><div>emp e1 left join emp e2</div><div>on e1.mgr = e2.empno;</div></div><div><br/></div><div><br/></div><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">十一、Rownum与分页查询</span></span></div><ol><li><div><span style="font-size: 12pt;">ROWNUM:表示行号，实际上此是一个列,但是这个列是一个伪列,此列可以在每张表中出现。</span></div></li><li><div><span style="font-size: 16px;">执行原理：执行select操作 的时候，每查询一行记录，就会在该行上加一个行号，行号从1开始，一次递增，不能跳着走</span></div></li><li><div><span style="font-size: 12pt;">rownum行号不能写上大于一个 整数</span></div></li><li><div><span style="font-size: 16px;">示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">rownum</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,e.*</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">emp e</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">order</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">by</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">e.sal</span></div></li><li><div><span style="font-size: 12pt; font-family: &quot;Courier New&quot;;">解决行号乱序示例：</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">rownum</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,t.*</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">(</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">select</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">rownum</span><span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">,e.*</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">from</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">emp e</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">order</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 128, 128); font-family: &quot;Courier New&quot;;">by</span> <span style="min-height: 17pt; font-size: 17pt; color: rgb(0, 0, 128); font-family: &quot;Courier New&quot;;">e.sal) t;</span></div></li></ol><div><span style="font-size: 16px;"><span style="font-size: 16px; font-weight: bold;">分页查询固定写法</span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><span style="font-size: 16px;">select * from (</span></div><div><span style="font-size: 16px;">       select rownum rn,e.* from(</span></div><div><span style="font-size: 16px;">              select * from emp order by sal  desc</span></div><div><span style="font-size: 16px;">       ) e where rownum &lt; 11</span></div><div><span style="font-size: 16px;">) where rn &gt; 5</span></div></div><div><span style="font-weight: bold; font-size: 14pt;">十二、视图</span></div><ol><li><div><span style="font-size: 16px;">概念：视图就是提供一个查询的窗口，所有数据来自于原表</span></div></li></ol><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 14pt;"><br/></font></div><div><font style="font-size: 14pt;"><br/></font></div><div><font style="font-size: 14pt;"><br/></font></div></div><div><br/></div></span>
</div></body></html> 